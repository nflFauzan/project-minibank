<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
  <meta charset="utf-8"/>
  <title>Teller - Form Penarikan Tunai</title>
  <link rel="stylesheet" th:href="@{/css/cs-shell.css}">
<link rel="stylesheet" th:href="@{/css/custom.css}">
<link rel="stylesheet" th:href="@{/css/minibank-ui.css}">
<link rel="stylesheet" th:href="@{/css/account.css}">
</head>
<body>
<div class="cs-shell">
  <div th:replace="~{cs/fragments :: tellerSidebar('withdrawal')}"></div>

  <div class="cs-content">
    <div th:replace="~{cs/fragments :: topbar}"></div>

    <main class="cs-page">

      <div style="display:flex;align-items:center;justify-content:space-between;margin-bottom:12px;">
        <div style="font-size:20px;font-weight:900;color:#0b2a6f;">Formulir Penarikan Tunai</div>
        <a th:href="@{/teller/transaction/withdrawal}" style="font-weight:800;color:#0b2a6f;text-decoration:none;">‚Üê Kembali ke Pilih Rekening</a>
      </div>

      <div th:if="${error}" style="background:#fee2e2;border:1px solid #fecaca;color:#991b1b;padding:12px;border-radius:12px;font-weight:800;margin-bottom:12px;"
           th:text="${error}">Error</div>

      <form th:action="@{/teller/transaction/withdrawal/{no}(no=${rekening.nomorRekening})}"
            method="post"
            th:object="${form}"
            style="background:#fff;border-radius:16px;border:1px solid rgba(0,0,0,.06);box-shadow:0 10px 25px rgba(0,0,0,.05);padding:16px;">

        <div style="background:#f8fafc;border:1px solid rgba(0,0,0,.06);border-radius:14px;padding:14px;">
          <div style="font-weight:1000;margin-bottom:10px;">Informasi Rekening</div>

          <div style="display:grid;grid-template-columns:1fr 1fr;gap:10px 18px;font-size:12px;font-weight:800;color:#334155;">
            <div>Nomor Rekening: <span th:text="${rekening.nomorRekening}">-</span>
              <span style="margin-left:8px;font-size:11px;font-weight:1000;padding:4px 8px;border-radius:999px;background:#dcfce7;color:#166534;">ACTIVE</span>
            </div>
            <div>Produk: <span th:text="${rekening.produk}">-</span></div>

            <div>Pemilik: <span th:text="${rekening.namaNasabah}">-</span></div>
            <div>
              Saldo Saat Ini:
              <span th:text="${rekening.saldo != null ? #numbers.formatDecimal(rekening.saldo,1,'COMMA',2,'POINT') : '0.00'}">0.00</span>
            </div>

            <div>No. Nasabah: <span th:text="${rekening.cifNasabah}">-</span></div>
            <div>Cabang: <span th:text="${rekening.cabangPembukaan}">-</span></div>

            <div>Nama Rekening: <span th:text="${rekeningNama}">-</span></div>
            <div></div>
          </div>
        </div>

        <div style="margin-top:14px;">
          <div style="font-weight:900;margin-bottom:6px;">Jumlah Penarikan <span style="color:#dc2626;">*</span></div>
          <input type="number" step="1" min="1"
                 th:field="*{jumlahPenarikan}"
                 placeholder="Masukkan nominal"
                 style="width:100%;padding:12px 12px;border:1px solid rgba(0,0,0,.15);border-radius:12px;outline:none;">
          <div style="margin-top:6px;font-size:12px;color:#64748b;font-weight:800;">Tidak boleh 0 dan tidak boleh melebihi saldo.</div>
        </div>

        <div style="margin-top:14px;">
          <div style="font-weight:900;margin-bottom:6px;">Keterangan <span style="color:#dc2626;">*</span></div>
          <textarea rows="4" maxlength="500" th:field="*{keterangan}"
                    style="width:100%;padding:12px 12px;border:1px solid rgba(0,0,0,.15);border-radius:12px;outline:none;"></textarea>
          <div style="margin-top:6px;font-size:12px;color:#64748b;font-weight:800;">Wajib diisi, maksimal 500 karakter.</div>
        </div>

        <div style="margin-top:14px;">
          <div style="font-weight:900;margin-bottom:6px;">Nomor Referensi</div>
          <input th:field="*{noReferensi}" placeholder="Nomor referensi internal (opsional)"
                 style="width:100%;padding:12px 12px;border:1px solid rgba(0,0,0,.15);border-radius:12px;outline:none;">
          <div style="margin-top:6px;font-size:12px;color:#64748b;font-weight:800;">Opsional, maksimal 100 karakter.</div>
        </div>

        <div style="margin-top:16px;display:flex;justify-content:flex-end;gap:10px;">
          <a th:href="@{/teller/transaction/withdrawal}"
             style="padding:10px 14px;border-radius:12px;background:#f1f5f9;color:#0f172a;text-decoration:none;font-weight:1000;">
            Batal
          </a>
          <button type="submit"
                  style="padding:10px 14px;border:0;border-radius:12px;background:#dc2626;color:#fff;font-weight:1000;cursor:pointer;">
            Proses Penarikan Tunai
          </button>
        </div>

      </form>

    </main>
  </div>
</div>
</body>
</html>
