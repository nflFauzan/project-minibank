<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="utf-8"/>
    <title>Admin - Pending Registrations</title>
    <link th:href="@{/css/custom.css}" rel="stylesheet" />
    <style>
      body { font-family: Arial, sans-serif; margin: 0; padding: 24px; background: #f3f8ff; }
      .container { max-width: 1100px; margin: 0 auto; }
      .topbar { display:flex; justify-content:space-between; align-items:center; margin-bottom: 10px; }
      h2 { color: #113C8D; text-align:center; margin: 0; flex:1;}
      .logout-form { margin:0; }
      .btn-logout {
        border: none; border-radius: 10px; padding: 10px 14px;
        cursor: pointer; font-weight: 700;
      }
      p.sub { text-align:center; color: #556; margin-bottom: 20px; }
      .list { background: rgba(255,255,255,0.9); border-radius: 12px; padding: 18px; box-shadow: 0 6px 20px rgba(0,0,0,0.05); }
      table { width:100%; border-collapse: collapse; }
      th, td { padding: 12px 10px; text-align:left; border-bottom: 1px solid #eee; }
      a.detail { color:#0F3FA8; text-decoration:none; font-weight:700; }
      .empty { text-align:center; padding: 40px 10px; color:#556; }
    </style>
</head>
<body>
  <div class="container">

    <div class="topbar">
      <div style="width:120px;"></div>
      <h2>Pending Registrations</h2>

      <!-- Logout harus POST biar pasti kena Spring Security -->
      <form class="logout-form" th:action="@{/logout}" method="post">
        <button class="btn-logout" type="submit">Logout</button>
      </form>
    </div>

    <p class="sub">Ada meminta konfirmasi pembuatan akun nih, yuk segera dikonfirmasi!</p>

    <div class="list">
      <div th:if="${users == null or #lists.isEmpty(users)}" class="empty">
        Tidak ada request pendaftaran saat ini.
      </div>

      <div th:if="${users != null and !#lists.isEmpty(users)}">
        <table>
          <thead>
            <tr>
              <th>#</th>
              <th>Full Name</th>
              <th>Username</th>
              <th>Prodi / NIM</th>
              <th>Aksi</th>
            </tr>
          </thead>
          <tbody>
            <tr th:each="u,iterStat : ${users}">
              <td th:text="${iterStat.index + 1}"></td>
              <td th:text="${u.fullName}"></td>
              <td th:text="${u.username}"></td>
              <td><span th:text="${u.prodi}"></span><br/><small th:text="${u.nim}"></small></td>
              <td>
                <a th:href="@{/admin/approval/{id}(id=${u.id})}" class="detail">Lihat / Konfirmasi</a>
              </td>
            </tr>
            <form action="/logout" method="post">
              <button type="submit">Logout</button>
            </form>
            
          </tbody>
        </table>
      </div>
    </div>
  </div>
</body>
</html>
